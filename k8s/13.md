# Kubernetes StatefulSet

## StatefulSet Exploration and Optimization

### Output of commands

`kubectl get po,sts,svc,pvc`

```bash
NAME                        READY   STATUS      RESTARTS   AGE
pod/post-install-hook       0/1     Completed   0          31s
pod/pre-install-hook        0/1     Completed   0          38s
pod/stateful-app-python-0   1/1     Running     0          31s
pod/stateful-app-python-1   1/1     Running     0          31s

NAME                                   READY   AGE
statefulset.apps/stateful-app-python   2/2     31s

NAME                          TYPE           CLUSTER-IP     EXTERNAL-IP   PORT(S)          AGE
service/kubernetes            ClusterIP      10.96.0.1      <none>        443/TCP          28d
service/stateful-app-python   LoadBalancer   10.102.17.45   <pending>     5000:31742/TCP   31s

NAME                                                     STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
persistentvolumeclaim/volume-stateful-app-python-0   Bound    pvc-ed7a9100-ed53-4232-9daa-edc9911477bb   1Gi        RWO            standard       31s
persistentvolumeclaim/volume-stateful-app-python-1   Bound    pvc-5ff572ec-2695-4dd8-9cd8-b0a494949f4f   1Gi        RWO            standard       31s
```

---

`minikube service stateful-app-python`

```bash
|-----------|---------------------|-------------|---------------------------|
| NAMESPACE |        NAME         | TARGET PORT |            URL            |
|-----------|---------------------|-------------|---------------------------|
| default   | stateful-app-python | http/5000   | http://192.168.49.2:31742 |
|-----------|---------------------|-------------|---------------------------|
üèÉ  Starting tunnel for service stateful-app-python.
|-----------|---------------------|-------------|------------------------|
| NAMESPACE |        NAME         | TARGET PORT |          URL           |
|-----------|---------------------|-------------|------------------------|
| default   | stateful-app-python |             | http://127.0.0.1:58841 |
|-----------|---------------------|-------------|------------------------|
üéâ  Opening service default/stateful-app-python in default browser...
‚ùó  Because you are using a Docker driver on windows, the terminal needs to be open to run it.
```

![service](./assets/service.jpg)

---

`kubectl exec pod/stateful-app-python-0 -- cat visits/visits.txt`
```bash
3
```
`kubectl exec pod/stateful-app-python-1 -- cat visits/visits.txt`
```bash
7
```

#### Diff in results 

StatetufulSet pods have independent storages, thus there are unique values

--- 

#### Explanation of "why ordering guarantees are unnecessary for your app"

It is unnecessary because it relies to visits.txt file, which already independent (isolated) for each pod
